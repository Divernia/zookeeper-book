目前为止我们使用的配置文件是用于单机模式的。如果服务器起来了，那么服务就起来了，但是如果服务器宕机了，那么整个服务器也就随之挂了。这和当初提供一个可靠的协同服务的承诺有些不符。为了能真正得到可靠的服务，我们需要运行多台服务器。

幸运的是，即使我们只有一台机器也能运行多个服务器。我们只需要建立一个更高级的配置文件。

为了让服务器之间相互联系，它们需要一些联系人的信息。理论上服务器可以通过多播协议来发现对方，但是我们支持除了单一网络外运行Zookeeper集合分散在多个网络中以支持多个Zookeeper集合。

![](/assets/Figure 2-7.png)

图2-7 客户端重连接例子

为了完成这个例子，我们使用如下配置文件：

`tickTime=2000`

`initLimit=10`

`syncLimit=5`

`dataDir=./data`

`clientPort=2181`

`server.1=127.0.0.1:2222:2223`

`server.2=127.0.0.1:3333:3334`

`server.3=127.0.0.1:4444:4445`

我们关注最后三行，服务器.n的入口。剩下的普通的配置参数，会在第10章进行说明。



